{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _classCallCheck from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Semester from '../components/Semester.jsx';\nimport Button from '@material-ui/core/Button';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Modal from '@material-ui/core/Modal';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withTranslation } from 'react-i18next';\nimport domtoimage from 'dom-to-image';\nexport function generateImage(semesterNum) {\n  var img = new Image();\n  var node = document.getElementById(\"semester-\".concat(semesterNum, \" clone\"));\n  node.style.display = \"block\";\n  domtoimage.toPng(node).then(function (dataUrl) {\n    img.src = dataUrl;\n    img.id = 'results-image';\n    img.setAttribute('alt', \"Semester \".concat(semesterNum, \" results\"));\n  })[\"catch\"](function (error) {\n    alert(\"An error occurred during the generation of the image.\");\n    console.error('oopss', error);\n  });\n  return img;\n}\n\nvar DownloadImage = /*#__PURE__*/function (_React$Component) {\n  _inherits(DownloadImage, _React$Component);\n\n  var _super = _createSuper(DownloadImage);\n\n  function DownloadImage(props) {\n    var _this;\n\n    _classCallCheck(this, DownloadImage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOpen\", function () {\n      _this.image = generateImage(_this.semesterNum);\n\n      var $this = _assertThisInitialized(_this); // preserve the *this* object.\n\n\n      _this.image.onload = function () {\n        // *this* here will be undefined ?(arrow function) so use $this\n        // console.log($this.image);\n        $this.setState({\n          open: true\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClose\", function () {\n      var node = document.getElementById(\"semester-\".concat(_this.semesterNum, \" clone\"));\n      node.style.display = \"none\";\n\n      _this.setState({\n        open: false\n      });\n    });\n\n    _this.image = null;\n    _this.semesterNum = props.semesterNum;\n    _this.state = {\n      open: false\n    };\n    return _this;\n  }\n\n  _createClass(DownloadImage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var image = this.image,\n          t = this.props.t;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          variant: \"outlined\",\n          color: \"primary\",\n          onClick: function onClick() {\n            return _this2.handleOpen();\n          },\n          endIcon: /*#__PURE__*/_jsx(GetAppIcon, {}),\n          children: t('Image')\n        }), /*#__PURE__*/_jsx(Modal, {\n          open: this.state.open,\n          onClose: function onClose() {\n            return _this2.handleClose();\n          },\n          \"aria-label\": \"Semester \".concat(this.semesterNum, \" results modal image\"),\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'row-reverse',\n            height: '90%'\n          },\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(IconButton, {\n              \"aria-label\": \"Close modal\",\n              onClick: function onClick() {\n                return _this2.handleClose();\n              },\n              component: \"span\",\n              style: {\n                alignSelf: 'start',\n                color: 'ghostwhite',\n                marginLeft: '3rem'\n              },\n              children: /*#__PURE__*/_jsx(CloseIcon, {})\n            }), image !== null ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: image.src,\n                alt: image.alt,\n                id: image.id,\n                style: {\n                  width: '60%'\n                }\n              }), /*#__PURE__*/_jsx(\"a\", {\n                href: image.src,\n                download: \"Semester {this.semesterNum} results.png\",\n                style: {\n                  alignSelf: 'end',\n                  position: 'relative',\n                  bottom: '1rem',\n                  right: '2rem'\n                },\n                children: /*#__PURE__*/_jsx(Button, {\n                  color: \"secondary\",\n                  variant: \"contained\",\n                  onClick: function onClick() {\n                    return _this2.handleClose();\n                  },\n                  disableElevation: true // style={{color: 'darkblue'}}\n                  ,\n                  children: t('Download')\n                })\n              })]\n            }) : null]\n          })\n        })]\n      });\n    }\n  }]);\n\n  return DownloadImage;\n}(React.Component);\n\nexport { DownloadImage as default };","map":null,"metadata":{},"sourceType":"module"}