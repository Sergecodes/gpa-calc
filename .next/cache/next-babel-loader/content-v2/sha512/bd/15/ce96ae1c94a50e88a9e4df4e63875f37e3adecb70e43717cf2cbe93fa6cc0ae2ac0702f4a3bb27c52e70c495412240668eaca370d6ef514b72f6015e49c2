{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, Suspense } from 'react';\nimport LanguageSelector from \"../components/LanguageSelector.jsx\";\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport Button from '@material-ui/core/Button';\nimport Heading from '../components/Heading.jsx';\nimport SemesterList from '../components/SemesterList.jsx';\nimport FinalResult from '../components/FinalResult.jsx';\nimport HowToCalculate from '../components/HowToCalculate.jsx';\nimport Contact from '../components/Contact.jsx';\nimport { withRouter } from 'next/router';\nimport transEN from '../public/locales/en/en.js';\nimport transFR from '../public/locales/fr/fr.js';\nvar INITIAL_COURSES = [{\n  id: 1,\n  name: '',\n  credit: 0,\n  // weight(coeficient) of the course such as 3, 6..\n  markOver100: 0.0,\n  points: 0.0,\n  // example: 3.7, 4.0 ..\n  grade: '' // such as A, B..\n\n}, {\n  id: 2,\n  name: '',\n  credit: 0,\n  markOver100: 0.0,\n  points: 0.0,\n  grade: ''\n}, {\n  id: 3,\n  name: '',\n  credit: 0,\n  markOver100: 0.0,\n  points: 0.0,\n  grade: ''\n}];\nvar INITIAL_SEMESTER = {\n  courses: JSON.parse(JSON.stringify(INITIAL_COURSES)),\n  gpa: 0.0,\n  number: 1\n};\n\nvar GPACalculator = /*#__PURE__*/function (_Component) {\n  _inherits(GPACalculator, _Component);\n\n  var _super = _createSuper(GPACalculator);\n\n  function GPACalculator(props) {\n    var _this;\n\n    _classCallCheck(this, GPACalculator);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleLanguageChange\", function (locale) {\n      _this.t = locale === 'en' ? transEN : transFR;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPoints\", function (mark) {\n      mark = parseFloat(mark); // mark should never be > 100 nor < 0 nor invalid !\n\n      if (mark > 100) {\n        alert(\"Wrong input\");\n        return 0.0;\n      } else if (mark >= 80) return 4.00;else if (mark >= 75) return 3.70;else if (mark >= 70) return 3.30;else if (mark >= 65) return 3.00;else if (mark >= 60) return 2.70;else if (mark >= 55) return 2.30;else if (mark >= 50) return 2.00;else if (mark >= 45) return 1.70;else if (mark >= 40) return 1.30;else if (mark >= 35) return 1.00;else if (mark >= 30) return 0.00;else if (mark >= 0) return 0.00;else {\n        alert(\"Wrong input\");\n        return '-';\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getGrade\", function (mark) {\n      mark = parseFloat(mark);\n\n      if (mark > 100) {\n        alert(\"Wrong input\");\n        return '-';\n      } else if (mark >= 80) return 'A';else if (mark >= 75) return 'A-';else if (mark >= 70) return 'B+';else if (mark >= 65) return 'B';else if (mark >= 60) return 'B-';else if (mark >= 55) return 'C+';else if (mark >= 50) return 'C';else if (mark >= 45) return 'C-';else if (mark >= 40) return 'D+';else if (mark >= 35) return 'D';else if (mark >= 30) return 'E';else if (mark >= 0) return 'F';else {\n        alert(\"Wrong input\");\n        return '-';\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTotalCredit\", function (semester) {\n      var courses = _toConsumableArray(semester.courses);\n\n      var totalCredit = 0;\n\n      var _iterator = _createForOfIteratorHelper(courses),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var course = _step.value;\n          totalCredit += course.credit;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return totalCredit;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"calculateGPA\", function (semester) {\n      var courses = _toConsumableArray(semester.courses);\n\n      var sum = 0.0;\n\n      var _iterator2 = _createForOfIteratorHelper(courses),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var course = _step2.value;\n          sum += course.credit * course.points;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var totalCredit = _this.getTotalCredit(semester);\n\n      if (totalCredit === 0) return 0.0; // to prevent zero division error\n\n      var gpa = sum / totalCredit;\n      if (isNaN(gpa)) return 0.0;\n      return parseFloat(gpa.toFixed(2)); // return gpa in 2 dps\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isInt\", function (val) {\n      return /^\\d+$/.test(val);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isReal\", function (val) {\n      return !isNaN(val) && !isNaN(parseFloat(val));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasMoreThanOneDecimalPoint\", function (val) {\n      var index = val.indexOf('.');\n\n      if (index !== -1) {\n        if (val.substring(index + 1).indexOf('.') === -1) {\n          // contains only one decimal point\n          return false;\n        } else {\n          // contains more than one decimal point\n          return true;\n        }\n      } else {\n        // contains no decimal point\n        return false;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputChange\", function (event, course, semester) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      var semesters = JSON.parse(JSON.stringify(_this.state.semesters));\n\n      var course = _objectSpread({}, course);\n\n      course[name] = value; // semester.courses.splice(course.id - 1, 1, course); or better still\n\n      semester.courses[course.id - 1] = course;\n      semesters[semester.number - 1] = semester;\n\n      _this.setState({\n        semesters: semesters\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMarkOrCreditChange\", function (event, course, semester) {\n      var name = event.target.name;\n      var value = event.target.value; // console.log(name, value);\n\n      if (value === '') value = 0;\n\n      if (name === \"credit\") {\n        if (!_this.isInt(value)) return;\n        value = parseInt(value, 10);\n        if (value < 0 || value > 10) return;\n      } else if (name === \"markOver100\") {\n        if (!_this.isReal(value)) return;\n        if (typeof value === \"string\" && _this.hasMoreThanOneDecimalPoint(value)) return; // parseFloat('9.') returns 9, same as parseFloat('9.0'); thus decimal point is lost.\n        // To prevent this, only perform validation if value doesn't end with decimal point nor 0\n        // If it ends with a decimal point, we'll just accept it\n\n        if (typeof value === \"string\" && !value.endsWith('.') && !value.endsWith('0')) value = parseFloat(value);\n        if (value < 0 || value > 100) return;\n      }\n\n      var course = _objectSpread({}, course);\n\n      if (course[name] === value) // do nothing if value hasn't changed\n        return;\n      course[name] = value;\n      var semesters = JSON.parse(JSON.stringify(_this.state.semesters));\n\n      if (name === \"markOver100\") {\n        course.grade = _this.getGrade(course.markOver100);\n        course.points = _this.getPoints(course.markOver100);\n      } // console.log(course);\n\n\n      semester.courses[course.id - 1] = course;\n      semester.gpa = _this.calculateGPA(semester);\n      semesters[semester.number - 1] = semester;\n\n      _this.setState({\n        semesters: semesters\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAddSemester\", function () {\n      // New semester's number is obtained by incrementing last semester's number\n      // which is equal to the number of semesters\n      var newSemesterNum = _this.state.semesters.length + 1;\n      /*\n        semesters.push({\n          number: newSemesterNum,\n          gpa: 0.0,\n          courses: JSON.parse(JSON.stringify(INITIAL_COURSES))\n        });\n        this.setState({ semesters });\n      */\n\n      _this.setState(function (prevState) {\n        return {\n          semesters: [].concat(_toConsumableArray(prevState.semesters), [{\n            courses: JSON.parse(JSON.stringify(INITIAL_COURSES)),\n            gpa: 0.0,\n            number: newSemesterNum\n          }])\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDeleteSemester\", function (semester) {\n      var semesters = JSON.parse(JSON.stringify(_this.state.semesters)); // We know that semesterIndex is always one shy of the semesterNum\n\n      var semesterNum = semester.number,\n          semesterIndex = semesterNum - 1;\n      semesters = semesters.filter(function (sem) {\n        return sem.number !== semesterNum;\n      }); // for every semester whose number is beyond the semesterNum, decrement its number\n\n      for (var i = semesterIndex; i < semesters.length; i++) {\n        semesters[i].number--;\n      } // semesters[i].number = semesters[i].number - 1;\n\n\n      _this.setState({\n        semesters: semesters\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResetSemester\", function (semester) {\n      var semesters = JSON.parse(JSON.stringify(_this.state.semesters));\n      semester.courses = semester.courses.map(function (course) {\n        var _ref = ['', 0, 0.0, 0.0, ''];\n        course.name = _ref[0];\n        course.credit = _ref[1];\n        course.markOver100 = _ref[2];\n        course.points = _ref[3];\n        course.grade = _ref[4];\n        return course;\n      });\n      semester.gpa = 0.0;\n      semesters[semester.number - 1] = semester;\n\n      _this.setState({\n        semesters: semesters\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAddCourse\", function (semester) {\n      // var semesters = [...this.state.semesters];\n      var semesters = JSON.parse(JSON.stringify(_this.state.semesters));\n      var numCourses = semester.courses.length;\n      semester.courses.push({\n        // new course's id is obtained by incrementing last course's id (which is the number of courses)\n        id: numCourses + 1,\n        name: '',\n        credit: 0,\n        markOver100: 0.0,\n        grade: ''\n      });\n      semesters[semester.number - 1] = semester;\n\n      _this.setState({\n        semesters: semesters\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDeleteCourse\", function (course, semester) {\n      var semesters = JSON.parse(JSON.stringify(_this.state.semesters));\n      var courseIndex = course.id - 1; // var semesterCourses = semester.courses;\n      // Remove course from list of semester's courses\n\n      semester.courses = semester.courses.filter(function (semCourse) {\n        return semCourse.id !== course.id;\n      }); // Reallocate ids(every course which comes after the deleted course's number's id is decremented)\n\n      for (var i = courseIndex; i < semester.courses.length; i++) {\n        semester.courses[i].id--;\n      } // semester.courses[i].id = semester.courses[i].id - 1\n\n\n      semester.gpa = _this.calculateGPA(semester);\n      semesters[semester.number - 1] = semester;\n\n      _this.setState({\n        semesters: semesters\n      });\n    });\n\n    console.log(\"Semesters list rendered\");\n    _this.state = {\n      semesters: [JSON.parse(JSON.stringify(INITIAL_SEMESTER))]\n    };\n    _this.router = props.router;\n    var _locale = props.router.locale;\n    _this.t = _locale === 'en' ? transEN : transFR;\n    _this.locale = _locale;\n    return _this;\n  }\n\n  _createClass(GPACalculator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(this.locale);\n      this.router.push('/', '/', {\n        locale: this.locale\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // if(this.router !== null && this.router !== undefined)\n      //   this.router.push('/', '/', { locale: this.locale });\n      var semesters = this.state.semesters;\n      var numSemesters = semesters.length;\n      var gpas = semesters.map(function (semester) {\n        return semester.gpa;\n      });\n      var t = this.t;\n      return (\n        /*#__PURE__*/\n        // <Suspense fallback={<Loader />}>\n        _jsxs(\"div\", {\n          id: \"app\",\n          children: [/*#__PURE__*/_jsx(LanguageSelector, {\n            t: t,\n            locale: this.locale,\n            router: this.router,\n            handleLanguageChange: this.handleLanguageChange\n          }), /*#__PURE__*/_jsx(\"br\", {}), \" \", /*#__PURE__*/_jsx(\"br\", {}), \" \", /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Heading, {\n            t: t\n          }), /*#__PURE__*/_jsxs(\"main\", {\n            children: [/*#__PURE__*/_jsx(SemesterList, {\n              t: t,\n              semesters: semesters,\n              numSemesters: numSemesters,\n              onInputChange: this.handleInputChange,\n              onMarkOrCreditChange: this.handleMarkOrCreditChange,\n              onDeleteSemester: this.handleDeleteSemester,\n              onResetSemester: this.handleResetSemester,\n              onAddCourse: this.handleAddCourse,\n              onDeleteCourse: this.handleDeleteCourse\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                fontWeight: 'bolder',\n                fontStyle: 'italic',\n                \"float\": 'right',\n                marginBottom: '1.6rem'\n              },\n              children: numSemesters === 1 ? 1 + ' ' + t('semester') : numSemesters + ' ' + t('semesters')\n            }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n              color: \"primary\",\n              onClick: this.handleAddSemester,\n              startIcon: /*#__PURE__*/_jsx(AddCircleOutlineIcon, {}),\n              style: {\n                border: '2px solid rgba(144, 144, 144, 0.4)',\n                width: '100%',\n                justifyContent: 'left',\n                paddingLeft: '1rem'\n              },\n              children: t('Add a semester')\n            })]\n          }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(FinalResult, {\n            t: t,\n            gpas: gpas,\n            semesters: semesters,\n            calculateGPA: this.calculateGPA\n          }), /*#__PURE__*/_jsx(\"br\", {}), \" \", /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(HowToCalculate, {\n            t: t\n          }), /*#__PURE__*/_jsx(\"br\", {}), \" \", /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Contact, {\n            t: t\n          })]\n        }) // </Suspense>\n\n      );\n    }\n  }]);\n\n  return GPACalculator;\n}(Component);\n\nexport default withRouter(GPACalculator);","map":null,"metadata":{},"sourceType":"module"}