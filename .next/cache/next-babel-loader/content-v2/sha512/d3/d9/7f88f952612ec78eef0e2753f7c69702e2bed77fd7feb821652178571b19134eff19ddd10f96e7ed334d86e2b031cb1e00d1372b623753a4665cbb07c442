{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _classCallCheck from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/sergeman/Desktop/mgp-calculator-nextjs/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Button, Modal, IconButton } from '@material-ui/core';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { PDFDownloadLink, Page, Text, View, Image, Document, StyleSheet, ReactPDF, PDFViewer } from '@react-pdf/renderer';\nimport { generateImage } from '../components/DownloadImage.jsx';\nvar styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#eee'\n  }\n});\n\nvar DownloadPDF = /*#__PURE__*/function (_React$Component) {\n  _inherits(DownloadPDF, _React$Component);\n\n  var _super = _createSuper(DownloadPDF);\n\n  function DownloadPDF(props) {\n    var _this;\n\n    _classCallCheck(this, DownloadPDF);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"MyDoc\", function () {\n      return /*#__PURE__*/_jsx(Document, {\n        children: /*#__PURE__*/_jsx(Page, {\n          size: \"A4\",\n          style: _objectSpread(_objectSpread({}, styles.page), {}, {\n            textAlign: 'center'\n          }),\n          children: /*#__PURE__*/_jsx(Image, {\n            src: _this.image.src,\n            style: {\n              width: '100%'\n            }\n          })\n        })\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClose\", function () {\n      var node = document.getElementById(\"semester-\".concat(_this.semesterNum, \" clone\"));\n      node.style.display = \"none\";\n\n      _this.setState({\n        open: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOpen\", function () {\n      _this.image = generateImage(_this.semesterNum);\n\n      var $this = _assertThisInitialized(_this); // preserve the *this* object.\n\n\n      _this.image.onload = function () {\n        // *this* here will be undefined ?(arrow function) so use $this\n        // console.log($this.image);\n        $this.setState({\n          open: true\n        });\n      };\n    });\n\n    _this.image = null;\n    _this.semesterNum = props.semesterNum;\n    _this.state = {\n      open: false\n    };\n    return _this;\n  }\n\n  _createClass(DownloadPDF, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var t = this.props.t;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          variant: \"outlined\",\n          color: \"primary\",\n          onClick: function onClick() {\n            return _this2.handleOpen();\n          },\n          endIcon: /*#__PURE__*/_jsx(GetAppIcon, {}),\n          children: \"PDF\"\n        }), /*#__PURE__*/_jsx(Modal, {\n          open: this.state.open,\n          onClose: function onClose() {\n            return _this2.handleClose();\n          },\n          \"aria-label\": \"Semester \".concat(this.semesterNum, \" results pdf modal\"),\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'row-reverse'\n          },\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(IconButton, {\n              \"aria-label\": \"Close modal\",\n              onClick: function onClick() {\n                return _this2.handleClose();\n              },\n              component: \"span\",\n              style: {\n                alignSelf: 'start',\n                color: 'ghostwhite',\n                marginLeft: '3rem'\n              },\n              children: /*#__PURE__*/_jsx(CloseIcon, {})\n            }), this.image !== null ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(PDFViewer, {\n                style: {\n                  width: '70%',\n                  marginTop: '2rem',\n                  marginBottom: '3rem',\n                  marginLeft: '3rem'\n                },\n                children: this.MyDoc()\n              }), /*#__PURE__*/_jsx(Button, {\n                color: \"secondary\",\n                variant: \"contained\",\n                onClick: function onClick() {\n                  return _this2.handleClose();\n                },\n                style: {\n                  alignSelf: 'end',\n                  position: 'relative',\n                  bottom: '2rem',\n                  left: '2rem'\n                },\n                children: /*#__PURE__*/_jsx(PDFDownloadLink, {\n                  document: this.MyDoc(),\n                  fileName: \"Semester \".concat(this.semesterNum, \" results.pdf\"),\n                  style: {\n                    textDecoration: 'none',\n                    color: 'midnightblue'\n                  },\n                  children: function children(_ref) {\n                    var blob = _ref.blob,\n                        url = _ref.url,\n                        loading = _ref.loading,\n                        error = _ref.error;\n                    return loading ? t('Loading...') : t('Download');\n                  }\n                })\n              })]\n            }) : null]\n          })\n        })]\n      });\n    }\n  }]);\n\n  return DownloadPDF;\n}(React.Component);\n\nexport { DownloadPDF as default };","map":null,"metadata":{},"sourceType":"module"}